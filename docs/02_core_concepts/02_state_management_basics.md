# é‡è¦æ¦‚å¿µ#2-2: Flutterã®çŠ¶æ…‹ç®¡ç†ï¼ˆState Managementï¼‰ã¨ã¯ä½•ã‹ï¼Ÿ

Flutterã§ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã¨ã€å¿…ãšã€ŒçŠ¶æ…‹ç®¡ç†ã€ã¨ã„ã†è¨€è‘‰ã«å‡ºä¼šã„ã¾ã™ã€‚ã“ã‚Œã¯ã€å¤šãã®åˆå¿ƒè€…ãŒã¤ã¾ãšããƒã‚¤ãƒ³ãƒˆã§ã™ãŒã€ä¸€åº¦ç†è§£ã—ã¦ã—ã¾ãˆã°ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã§è¤‡é›‘ãªã‚¢ãƒ—ãƒªã‚’ä½œã‚‹ãŸã‚ã®æœ€å¼·ã®æ­¦å™¨ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ã€ŒçŠ¶æ…‹ã€ã¨ã¯ä½•ã‹ã€ãã—ã¦ãªãœã€ŒçŠ¶æ…‹ç®¡ç†ã€ãŒå¿…è¦ãªã®ã‹ã‚’ã€æ–™ç†ã«ä¾‹ãˆãªãŒã‚‰åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ã€‚

## 1. ã€ŒçŠ¶æ…‹ï¼ˆStateï¼‰ã€ã¨ã¯ä½•ã‹ï¼Ÿ

**çŠ¶æ…‹**ã¨ã¯ã€ä¸€è¨€ã§è¨€ãˆã°**ã€Œæ™‚é–“ã¨å…±ã«å¤‰åŒ–ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã€ã‚¢ãƒ—ãƒªå†…ã®ãƒ‡ãƒ¼ã‚¿ã€**ã®ã“ã¨ã§ã™ã€‚

*   ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã®ã€Œç¾åœ¨ã®ã‚«ã‚¦ãƒ³ãƒˆæ•°ã€
*   ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã•ã‚ŒãŸã€Œãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ–‡å­—åˆ—ã€
*   è¨­å®šç”»é¢ã®ã€Œãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ãŒONã‹OFFã‹ã€ã¨ã„ã†çœŸå½å€¤
*   ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã—ãŸã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆã€

ã“ã‚Œã‚‰ã™ã¹ã¦ãŒã€ŒçŠ¶æ…‹ã€ã§ã™ã€‚Flutterã‚¢ãƒ—ãƒªã®UIã¯ã€ã“ã®ã€ŒçŠ¶æ…‹ã€ã‚’å…ƒã«æç”»ã•ã‚Œã¾ã™ã€‚ã¤ã¾ã‚Šã€**ã€ŒçŠ¶æ…‹ãŒå¤‰ã‚ã‚Œã°ã€UIã‚‚å¤‰ã‚ã‚‹ã€**ã®ãŒã€ç¾ä»£ã®UIé–‹ç™ºã®åŸºæœ¬ã§ã™ã€‚

## 2. ãªãœã€ŒçŠ¶æ…‹ç®¡ç†ã€ãŒå¿…è¦ãªã®ã‹ï¼Ÿ - æ•£ã‚‰ã‹ã£ãŸã‚­ãƒƒãƒãƒ³ã®å•é¡Œ

ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ—ãƒªãªã‚‰ã€å„ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒè‡ªåˆ†è‡ªèº«ã®å°ã•ãªçŠ¶æ…‹ï¼ˆä¾‹: `StatefulWidget`ï¼‰ã‚’æŒã¤ã ã‘ã§ååˆ†ã§ã™ã€‚ã—ã‹ã—ã€ã‚¢ãƒ—ãƒªãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã¦ã€å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚

**å•é¡Œï¼šè¤‡æ•°ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã§ã€åŒã˜ã€ŒçŠ¶æ…‹ã€ã‚’å…±æœ‰ã—ãŸã„**

*   **ä¾‹1:** `HomePage`ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’ã€`ProfilePage`ã§ã‚‚è¡¨ç¤ºã—ãŸã„ã€‚
*   **ä¾‹2:** `ProductListScreen`ã§ã€ŒãŠæ°—ã«å…¥ã‚Šã€ã«è¿½åŠ ã—ãŸå•†å“ã‚’ã€`FavoriteScreen`ã®ãƒªã‚¹ãƒˆã«ã‚‚åæ˜ ã•ã›ãŸã„ã€‚

ã“ã®ã‚ˆã†ãªå ´åˆã€çŠ¶æ…‹ã‚’å˜ç´”ã«ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ä¸­ã«æŒãŸã›ã¦ã„ã‚‹ã¨ã€**ã€Œãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ã€ãŒéžå¸¸ã«è¤‡é›‘ã«ãªã‚Šã¾ã™ã€‚** è¦ªã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‹ã‚‰å­ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã¸ã€ã•ã‚‰ã«å­«ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã¸ã¨ã€ãƒã‚±ãƒ„ãƒªãƒ¬ãƒ¼ã®ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ã‚’å»¶ã€…ã¨æ¸¡ã—ç¶šã‘ã‚‹å¿…è¦ãŒå‡ºã¦ãã¾ã™ã€‚

ã“ã‚Œã¯ã€**æ•£ã‚‰ã‹ã£ãŸã‚­ãƒƒãƒãƒ³**ã«ä¼¼ã¦ã„ã¾ã™ã€‚å¡©ãŒã©ã“ã«ã‚ã‚‹ã‹åˆ†ã‹ã‚‰ãšã€éš£ã®ã‚³ãƒ³ãƒ­ã‹ã‚‰å€Ÿã‚Šã¦ãã‚‹...ã¨ã„ã£ãŸéžåŠ¹çŽ‡ãªçŠ¶æ…‹ã§ã™ã€‚

**çŠ¶æ…‹ç®¡ç†**ã¨ã¯ã€ã“ã®æ•£ã‚‰ã‹ã£ãŸçŠ¶æ…‹ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®**ã€Œã‚­ãƒƒãƒãƒ³ã®æ•´ç†è¡“ã€**ãªã®ã§ã™ã€‚

## 3. çŠ¶æ…‹ç®¡ç†ã®ç›®çš„ï¼šçŠ¶æ…‹ã‚’ä¸€å…ƒç®¡ç†ã™ã‚‹ã€Œãƒ‘ãƒ³ãƒˆãƒªãƒ¼ã€

å„ªã‚ŒãŸçŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆRiverpod, BLoC, Providerãªã©ï¼‰ãŒæä¾›ã™ã‚‹ã®ã¯ã€**ã€Œã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’ä¸€ç®‡æ‰€ã«ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹ã€ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚„ã™ã„å ´æ‰€ã€**ã§ã™ã€‚

ã“ã‚Œã‚’ã€ã‚­ãƒƒãƒãƒ³ã®**ã€Œãƒ‘ãƒ³ãƒˆãƒªãƒ¼ï¼ˆé£Ÿæ–™åº«ï¼‰ã€**ã«ä¾‹ãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚

*   **çŠ¶æ…‹ï¼ˆãƒ‡ãƒ¼ã‚¿ï¼‰** â†’ ãƒ‘ãƒ³ãƒˆãƒªãƒ¼ã«ä¿ç®¡ã•ã‚Œã¦ã„ã‚‹**é£Ÿæï¼ˆå¡©ã€ç ‚ç³–ã€å°éº¦ç²‰ãªã©ï¼‰**
*   **UIã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ** â†’ é£Ÿæã‚’ä½¿ã£ã¦æ–™ç†ã‚’ã™ã‚‹**ã‚·ã‚§ãƒ•ãŸã¡**

ã“ã®ãƒ‘ãƒ³ãƒˆãƒªãƒ¼ãŒã‚ã‚Œã°ã€ã©ã®ã‚·ã‚§ãƒ•ï¼ˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆï¼‰ã‚‚ã€ãƒã‚±ãƒ„ãƒªãƒ¬ãƒ¼ã‚’ã™ã‚‹å¿…è¦ãªãã€**ç›´æŽ¥ãƒ‘ãƒ³ãƒˆãƒªãƒ¼ã«å¿…è¦ãªé£Ÿæã‚’å–ã‚Šã«è¡Œã**ã“ã¨ãŒã§ãã¾ã™ã€‚

ã•ã‚‰ã«ã€ãƒ‘ãƒ³ãƒˆãƒªãƒ¼ã®é£Ÿæï¼ˆçŠ¶æ…‹ï¼‰ã«å¤‰åŒ–ãŒã‚ã£ãŸå ´åˆï¼ˆä¾‹: æ–°ã—ã„ãƒˆãƒžãƒˆãŒç´å“ã•ã‚ŒãŸï¼‰ã€ãã®é£Ÿæã‚’å¿…è¦ã¨ã™ã‚‹ã™ã¹ã¦ã®ã‚·ã‚§ãƒ•ã«**ã€Œæ–°ã—ã„ãƒˆãƒžãƒˆãŒæ¥ãŸã‚ˆï¼ã€**ã¨ãŠçŸ¥ã‚‰ã›ãŒè¡Œãã€ã‚·ã‚§ãƒ•ãŸã¡ã¯æ–°ã—ã„ãƒˆãƒžãƒˆã‚’ä½¿ã£ã¦æ–™ç†ã‚’ä½œã‚Šç›´ã—ã¾ã™ï¼ˆUIãŒå†æç”»ã•ã‚Œã‚‹ï¼‰ã€‚

ã“ã‚ŒãŒã€çŠ¶æ…‹ç®¡ç†ã®åŸºæœ¬çš„ãªè€ƒãˆæ–¹ã§ã™ã€‚

## 4. ä»£è¡¨çš„ãªçŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

Flutterã«ã¯ã€ã“ã®ã€Œãƒ‘ãƒ³ãƒˆãƒªãƒ¼ã€ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®æ§˜ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå­˜åœ¨ã—ã¾ã™ã€‚ãã‚Œãžã‚Œã«ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ãŒã€ç›®çš„ã¯åŒã˜ã§ã™ã€‚

*   **Riverpod:** ç¾åœ¨ã€éžå¸¸ã«äººæ°—ãŒé«˜ãã€ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨å¼·åŠ›ãªæ©Ÿèƒ½ã‚’ä¸¡ç«‹ã—ã¦ã„ã¾ã™ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®å®‰å…¨æ€§ã‚‚é«˜ãã€åˆå¿ƒè€…ã‹ã‚‰ãƒ—ãƒ­ã¾ã§åºƒãæŽ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚**ã“ã®Cookbookã§ã¯ã€ä¸»ã«Riverpodã‚’æ‰±ã„ã¾ã™ã€‚**
*   **BLoC (Business Logic Component):** å¤§è¦æ¨¡ã§è¤‡é›‘ãªã‚¢ãƒ—ãƒªã«é©ã—ãŸã€åŽ³æ ¼ãªãƒ«ãƒ¼ãƒ«ã‚’æŒã¤è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã¨ã„ã†å¤§ããªåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚
*   **Provider:** Riverpodã®å‰èº«ã§ã‚ã‚Šã€ã‚·ãƒ³ãƒ—ãƒ«ã§å­¦ã³ã‚„ã™ã„ã®ãŒç‰¹å¾´ã€‚å°ã€œä¸­è¦æ¨¡ã®ã‚¢ãƒ—ãƒªã§åºƒãä½¿ã‚ã‚Œã¦ãã¾ã—ãŸã€‚

ã©ã®æ‰‹æ³•ã‚’é¸ã¶ã‹ã¯ã€ã‚¢ãƒ—ãƒªã®è¦æ¨¡ã‚„ãƒãƒ¼ãƒ ã®å¥½ã¿ã«ã‚ˆã‚Šã¾ã™ãŒã€é‡è¦ãªã®ã¯ã€ŒãªãœçŠ¶æ…‹ç®¡ç†ãŒå¿…è¦ã‹ã€ã¨ã„ã†æ ¹æœ¬ã‚’ç†è§£ã—ã¦ãŠãã“ã¨ã§ã™ã€‚

> **ðŸ¤– AIæ´»ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**
>
> çŠ¶æ…‹ç®¡ç†ã®æ¦‚å¿µã«ã¤ã„ã¦ã€ã•ã‚‰ã«AIã«æ·±ãèžã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
> ```
> ã‚ãªãŸã¯Flutterã®çŠ¶æ…‹ç®¡ç†ã«ã¤ã„ã¦ã€æ§˜ã€…ãªæ‰‹æ³•ã‚’æ¯”è¼ƒæ¤œè¨Žã§ãã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã§ã™ã€‚
>
> Riverpodã¨BLoCã«ã¤ã„ã¦ã€ãã‚Œãžã‚Œã®ãƒ¡ãƒªãƒƒãƒˆã¨ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’ã€å…·ä½“çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’äº¤ãˆãªãŒã‚‰æ¯”è¼ƒã—ã¦ãã ã•ã„ã€‚
>
> ä¾‹ãˆã°ã€ã€Œå°è¦æ¨¡ãªå€‹äººé–‹ç™ºã‚¢ãƒ—ãƒªã€ã¨ã€Œå¤§è¦æ¨¡ãªãƒãƒ¼ãƒ é–‹ç™ºã‚¢ãƒ—ãƒªã€ã§ã¯ã€ã©ã¡ã‚‰ãŒãã‚Œãžã‚Œé©ã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã‹ï¼Ÿãã®ç†ç”±ã‚‚èª¬æ˜Žã—ã¦ãã ã•ã„ã€‚
> ```